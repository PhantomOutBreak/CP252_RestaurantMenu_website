#**สมาชิก**
**นายก้องภพ เลาหะพิพัฒน์ชัย sc66102010231**

**นายประภากร คล้อยโท้ รหัสนิสิต 66102010144**

**นายบัญญวัต มณีชัย 66102010143**

---
#**วัตถุประสงค์โครงการ**

เว็บไซต์นี้ถูกสร้างขึ้นเพื่อช่วยให้ผู้ใช้งานสามารถดูเมนูอาหารที่อาจจะลืมหรือไม่ค่อยได้ใช้บริการบ่อย ๆ โดยเฉพาะอย่างยิ่งในกรณีที่ต้องการค้นหาสูตรอาหารหรือเมนูที่เคยทำหรือเคยสนใจไว้ในอดีต เว็บไซต์จะทำการจัดเก็บข้อมูลเมนูเหล่านั้นและแสดงผลให้ผู้ใช้งานสามารถเรียกดูได้อย่างสะดวกและรวดเร็ว

---
#**แก้ไขปัญหา**
- แก้ปัญหาการลืมเมนูหรือสูตรอาหารที่เคยทำ
- แก้ปัญหาความยุ่งยากในการค้นหาสูตรอาหาร


---
#**ผลที่คาดว่าจะได้รับ**
การใช้งานเว็บไซต์นี้ไม่เพียงแค่ช่วยให้ผู้ใช้งานค้นหาเมนูที่เคยทำมาก่อน แต่ยังช่วยให้การวางแผนมื้ออาหารในอนาคตสะดวกขึ้น ด้วยการให้ข้อมูลเมนูที่หลากหลายและสามารถเข้าถึงได้ง่ายทุกเมื่อที่ต้องการ นอกจากนี้ เว็บไซต์ยังอาจมีฟีเจอร์ช่วยบันทึกเมนูโปรดหรือรายการที่ต้องการลองในอนาคต ทำให้ผู้ใช้งานไม่พลาดเมนูเด็ด ๆ ที่อยากลองทำในครั้งถัดไป

---
#**DataStructure ที่จะใช้**
จัดเก็บรายการเมนูอาหารทั้งหมดด้วย **Array และ List** เมนูอาหารเป็นรายการที่มีโครงสร้างคล้ายกัน (ชื่อ, รูปภาพ, วัตถุดิบ, วิธีทำ) เพราะใช้งานง่ายเมื่อดึงข้อมูลทั้งหมดเพื่อแสดงผล ค้นหาด้วยชื่อเมนูผ่าน Search Bar

---
#**Functional และ Non-Functional**
- **Functional**
ผู้ใช้สามารถค้นหาเมนูอาหารได้
แสดงข้อมูลส่วนประกอบและวิธีการทำอาหาร
ผู้ใช้สามารถบันทึกเมนูโปรดไว้ดูภายหลังได้
ระบบแสดงภาพตัวอย่างของเมนูอาหาร
- **Non-Functional** Requirements
เว็บไซต์ต้องโหลดข้อมูลภายในไม่เกิน 3 วินาที
รองรับการใช้งานบนอุปกรณ์มือถือและเดสก์ท็อป (Responsive Design)
ความปลอดภัยของข้อมูลผู้ใช้งาน
อินเทอร์เฟซใช้งานง่ายและไม่ซับซ้อน

---
#การทำงาน **Data Structure**
ใช้เป็น Arraylist สร้าง list ในการเก็บข้อมูลที่fetchมาจาก users.json ดั่งภาพ
![image.png](/.attachments/image-96a82de0-1922-46e5-b85a-4047e2990705.png)

#**การเรียก API** 
จะใช้task.js` fetch ข้อมูลจาก API และ `server.js` จะทำหน้าที่ไปจัดการงานต่างๆที่

**API สำหรับจัดการรายการโปรด (Favorites)**
1. PUT /api/favorites วัตถุประสงค์ :เพิ่มหรือลบเมนูจากรายการโปรด
1. GET /api/favorites วัตถุประสงค์:เพิ่มหรือลบเมนูจาก To-Do List

**API สำหรับจัดการ To-Do List**
1. PUT /api/todo วัตถุประสงค์: เพิ่มหรือลบเมนูจาก To-Do List
1. GET /api/todo วัตถุประสงค์:ดึง To-Do List ของผู้ใช้ปัจจุบัน
1. DELETE /api/todo/:menu วัตถุประสงค์**:ย้ายเมนูจาก To-Do List ไปยัง Done List

**API สำหรับดึงรายการ Done List**
1. GET /api/doneวัตถุประสงค์: ดึงรายการอาหารที่ทำเสร็จแล้ว (Done List)

#**ขั้นตอนการทำงานของ API**
**การเพิ่ม/ลบรายการโปรด**
1.  Client ส่ง PUT Request ไปยัง /api/favorites พร้อมชื่อเมนู
2.  Server ตรวจสอบ Session : หากไม่ล็อกอิน ส่ง Error 401
3.  อัปเดตข้อมูล :หากเมนูอยู่ใน favorites ลบออก หากไม่มี  เพิ่มเข้าไป
4.  บันทึกข้อมูลในไฟล์ `users.json`
5.  ส่ง Response กลับไปยัง Client เพื่ออัปเดต UI

**การย้าย To-Do เป็น Done**
1.  Client ส่ง DELETE Request ไปยัง /api/todo/ชื่อเมนู
2.  Server ตรวจสอบ Session : หากไม่ล็อกอิน ส่ง Error 401
3.  ค้นหาเมนูใน To-Do List : หากไม่พบ ส่ง Error 400
4.  ย้ายเมนูไปยัง Done List และลบออกจาก To-Do
5.  บันทึกข้อมูล และส่ง Response กลับ

**โครงสร้างข้อมูลใน API Response**

ข้อมูลที่ส่งกลับจาก API จะมีรูปแบบ JSON โดย `users.json` ไฟล์นี้เก็บข้อมูลผู้ใช้และรายการโปรด

#**การทำงานของ Server.js**

**โดยมี Class User 
ใช้เก็บข้อมูลผู้ใช้ทั้งหมด**
- id: รหัสประจำตัวผู้ใช้
- email: อีเมลของผู้ใช้
- username: ชื่อผู้ใช้
- password: รหัสผ่านของผู้ใช้
- favorites: รายการโปรดของผู้ใช้
- todos: รายการ To-Do ของผู้ใช้
- dones: รายการที่เสร็จสิ้น (Done) ของผู้ใช้

**Class UserData จัดการข้อมูลผู้ใช้ทั้งหมดอย่างการเพิ่มแล้วลบข้อมูล
โดยมี** 
- loadUsers() อ่านข้อมูลจากไฟล์ users.json
- saveUsers() บันทึกข้อมูลผู้ใช้กลับไปยังไฟล์ users.json
- addNewUser(newUser)ตรวจสอบความว่ามีการซ้ำไหมของอีเมล/ชื่อผู้ใช้และสร้างผู้ใช้ใหม่และบันทึกไฟล์
- toggleFavorite(userId, menuName)เพิ่ม/ลบเมนูจากรายการโปรดของผู้ใช้และบันทึกการเปลี่ยนแปลง
- toggleTodo(userId, menuName)toggleTodo(userId, menuName)เพิ่ม/ลบเมนูจาก To-Do Listและบันทึกการเปลี่ยนแปลง
- markAsDone(userId, menuName)ย้ายเมนูจาก To-Do List ไปยัง Done Listและบันทึกการเปลี่ยนแปลงทันที
- getUserByIdดึงข้อมูลตามID
- authenticateUser ตรวจสอบข้อมูลloginของผู้ใช้

---
#**การบวนการทำงานของเว็บ Process Method Tool**
#**Processes**
**1.1 ลงทะเบียนผู้ใช้**
1. ผู้ใช้กรอกข้อมูล (อีเมล, ชื่อผู้ใช้, รหัสผ่าน) ในหน้าregister
1. ส่งข้อมูลผ่านฟอร์ม โดยใช้ HTTP POST Request
1. เซิร์ฟเวอร์ตรวจสอบข้อมูล :
- ตรวจสอบว่าอีเมลหรือชื่อผู้ใช้ซ้ำหรือไม่
- หากซ้ำ: แสดงข้อความเตือนและกลับไปหน้าลงทะเบียน
- หากไม่ซ้ำ: บันทึกข้อมูลลงไฟล์ users.json และ Redirect ไปหน้า login

**1.2 ล็อกอิน**
1. ผู้ใช้กรอกอีเมลและรหัสผ่าน ในหน้า /login
1. ส่งข้อมูลผ่านฟอร์ม โดยใช้ HTTP POST Request
1. เซิร์ฟเวอร์ตรวจสอบข้อมูล :
- ตรวจสอบอีเมลและรหัสผ่านในฐานข้อมูล
- หากถูกต้อง: สร้าง Session และ Redirect ไปหน้าเมนูหลัก (/menu)
- หากผิด: แสดงข้อความเตือนและกลับไปหน้าล็อกอิน

**1.3 จัดการรายการโปรด/To-Do/Done**
1. ผู้ใช้กดปุ่ม Favorite/To-Do บนเมนูอาหาร
1. ส่งคำขอ API (PUT/DELETE) ไปยัง /api/favorites หรือ /api/todo
1. เซิร์ฟเวอร์อัปเดตข้อมูล ใน users.json
1. ส่งผลลัพธ์กลับ เป็น JSON → หน้าเว็บอัปเดต UI ทันที
1.4 ย้ายรายการ To-Do เป็น Done
1.ผู้ใช้กดปุ่ม "ทำเสร็จ" ใน To-Do List
2.ส่งคำขอ DELETE ไปยัง /api/todo/:menu
3.เซิร์ฟเวอร์ย้ายข้อมูล จาก todos ไป dones ใน users.json
4.ส่งผลลัพธ์กลับ → หน้าเว็บแสดงรายการ Done ใหม่

#**Methods**

**2.1 ฝั่ง Backend (Node.js/Express.js)**

- จัดการข้อมูลผู้ใช้ :
- addNewUser(): เพิ่มผู้ใช้ใหม่
- authenticateUser(): ตรวจสอบข้อมูลล็อกอิน
- toggleFavorite(): เพิ่ม/ลบเมนูโปรด
- toggleTodo(): เพิ่ม/ลบ To-Do
- markAsDone(): ย้าย To-Do เป็น Done
- จัดการ Session :
ใช้ express-session เพื่อเก็บสถานะผู้ใช้หลังล็อกอิน
ตรวจสอบ Session ในทุก API Request

#**2.2 ฝั่ง Frontend (HTML/JavaScript)**

- เรนเดอร์หน้าเว็บ :
ใช้ EJS Template เพื่อแสดงข้อมูลผู้ใช้และเมนูอาหาร
ใช้ Bootstrap และ Font Awesome สำหรับ Styling
- อัปเดตข้อมูลแบบ Real-Time :
ใช้ fetch() ส่งคำขอ API
ใช้ DOMContentLoaded เพื่อโหลดข้อมูลเมื่อเปิดหน้า
ใช้ event.stopPropagation() เพื่อป้องกันการทำงานซ้ำซ้อน

#**Tools มีการใช้**

1. Node.js:เว็บเซิร์ฟเวอร์และจัดการ Backend Logic
1. Express.js:สร้าง API Routes และจัดการ HTTP Requests
1. EJS:เรนเดอร์หน้าเว็บแบบไดนามิก (Dynamic HTML)
1. Bootstrap:ออกแบบหน้าเว็บให้สวยงามและ Responsive
1. Font Awesome:ออกแบบหน้าเว็บให้สวยงามและ Responsive
1. bcrypt:ทดสอบการทำงานของโค้ด Backend
1. fs/promises:อ่าน/เขียนข้อมูลในไฟล์users.json
---
#**ตาราง Unit Test cases**
![image.png](/.attachments/image-a6a07969-4500-4e9e-b438-90b201c3d6c3.png)
| File |% Stmts| % Branch | % Funcs | % Lines | Uncovered Line |
| --- | --- | --- | --- | --- | --- |
| All files | 100 | 92.5 | 100 | 100 | - |
| task.js | 100 | 92.5 | 100 | 100 | 90, 168, 181 |

---

#**Test coverage report**
![image.png](/.attachments/image-f3763e18-ba25-401b-aa5b-db6da16929a0.png)


---
#ตัวอย่าง Test Case สำหรับการทดสอบ UserData Class
**1. การทดสอบการโหลดผู้ใช้จากไฟล์ JSON**
*   **ชื่อการทดสอบ**: "should load users from JSON file"
    
*   **รายละเอียดการทดสอบ**: เราจะทดสอบว่าโค้ดสามารถโหลดข้อมูลผู้ใช้จากไฟล์ JSON ที่มีข้อมูลผู้ใช้ได้ถูกต้องหรือไม่
    
*   **การตั้งค่าล่วงหน้า**: ก่อนอื่นเราจะทำการ Mock ค่าไฟล์ JSON ที่มีข้อมูลผู้ใช้
    
*   **ขั้นตอนการทดสอบ**:
    1.  Mock ค่าไฟล์ JSON ที่มีข้อมูลผู้ใช้
        
    2.  เรียกใช้เมธอด loadUsers ของ UserData
        
    3.  ตรวจสอบว่า userData.users มีขนาด 1 และอีเมลของผู้ใช้ถูกต้อง
        
*   **ผลลัพธ์ที่คาดหวัง**: ผู้ใช้จะถูกโหลดมาอย่างถูกต้อง และแสดงอีเมลที่ต้องการ

![image.png](/.attachments/image-de1f0318-cbf5-4ca4-b3d2-568fdb5b4524.png)

**2. การทดสอบกรณีข้อมูลในไฟล์ JSON ไม่ถูกต้อง**
*   **ชื่อการทดสอบ**: "should throw error if users data is not an array"
    
*   **รายละเอียดการทดสอบ**: เราจะทดสอบกรณีที่ไฟล์ JSON ที่โหลดมามีข้อมูลไม่ถูกต้อง เช่น ข้อมูลไม่อยู่ในรูปแบบอาร์เรย์
    
*   **การตั้งค่าล่วงหน้า**: Mock ค่าไฟล์ JSON ที่เป็นอ็อบเจกต์แทนที่จะเป็นอาร์เรย์
    
*   **ขั้นตอนการทดสอบ**:
    1.  Mock ค่าไฟล์ JSON ที่ไม่ถูกต้อง
        
    2.  เรียกใช้เมธอด loadUsers ของ UserData
        
    3.  ตรวจสอบว่า userData.users จะต้องเป็นอาร์เรย์ว่าง
        
*   **ผลลัพธ์ที่คาดหวัง**: userData.users จะเป็นอาร์เรย์ว่างและไม่มีข้อมูลผู้ใช้

![image.png](/.attachments/image-9ffe95d3-0849-462d-b8ba-9d5579893c6d.png)

**3. การทดสอบการเพิ่มผู้ใช้ใหม่**
*   **ชื่อการทดสอบ**: "should add a new user"
    
*   **รายละเอียดการทดสอบ**: จะทดสอบว่าเมื่อมีการเพิ่มผู้ใช้ใหม่ลงในระบบแล้ว ข้อมูลจะถูกบันทึกถูกต้องและแสดงผลได้ตามที่คาดไว้
    
*   **การตั้งค่าล่วงหน้า**: เราจะ Mock ฟังก์ชัน `writeFile` เพื่อไม่ให้เขียนไฟล์จริง
    
*   **ขั้นตอนการทดสอบ**:
    1.  ส่งข้อมูลผู้ใช้ใหม่
        
    2.  เรียกใช้เมธอด addNewUser ของ UserData
        
    3.  ตรวจสอบว่าเพิ่มผู้ใช้ได้สำเร็จและผลลัพธ์แสดง success
        
*   **ผลลัพธ์ที่คาดหวัง**: ผู้ใช้ใหม่จะถูกเพิ่มในระบบและฟังก์ชันจะคืนค่าผลลัพธ์ success

    
![image.png](/.attachments/image-a9e5d325-808d-429e-a306-59333f248eb3.png)

**4. การทดสอบการจัดการรายการโปรด**
*   **ชื่อการทดสอบ**: "should toggle favorite menu correctly"
    
*   **รายละเอียดการทดสอบ**: เราจะทดสอบว่าเมนูโปรดสามารถเพิ่มและลบได้อย่างถูกต้อง
    
*   **การตั้งค่าล่วงหน้า**: เราจะ Mock ฟังก์ชัน writeFile เพื่อไม่ให้เกิดการเขียนไฟล์จริง
    
*   **ขั้นตอนการทดสอบ**:
    1.  เพิ่มเมนูโปรด
        
    2.  ลบเมนูโปรด
        
    3.  ตรวจสอบว่าเมนูโปรดถูกเพิ่มและลบอย่างถูกต้อง
        
*   **ผลลัพธ์ที่คาดหวัง**: เมนูโปรดจะถูกเพิ่มและลบตามลำดับ

![image.png](/.attachments/image-34f466fd-3a53-4be1-8404-80310d327956.png)

**5. การทดสอบกรณีที่ไม่พบผู้ใช้**
*   **ชื่อการทดสอบ**: "should throw error when user not found in toggleFavorite"
    
*   **รายละเอียดการทดสอบ**: ทดสอบกรณีที่ไม่พบผู้ใช้เมื่อทำการเพิ่มหรือลบเมนูโปรด
    
*   **การตั้งค่าล่วงหน้า**: ไม่มีผู้ใช้ที่มี ID ที่ส่งเข้ามา
    
*   **ขั้นตอนการทดสอบ**:
    1.  เรียกใช้เมธอด toggleFavorite ด้วย ID ของผู้ใช้ที่ไม่มีในระบบ
        
    2.  ตรวจสอบว่าเกิดข้อผิดพลาดขึ้น
        
*   **ผลลัพธ์ที่คาดหวัง**: ต้องเกิดข้อผิดพลาดว่า "ผู้ใช้ไม่พบ"

![image.png](/.attachments/image-60ccb435-06df-4093-a5e7-5a558bb99dc1.png)

---

#สิ่งที่ยังไม่เสร็จสมบูรณ์ เช่น bug, error
* ยังไม่สามารถทำ Test ให้ Branch เป็น 100% ได้

---

#**Static profiling และ Dynamic profiling**

**Mobile:**
![Screenshot 2025-04-03 195844.png](/.attachments/Screenshot%202025-04-03%20195844-4b029b2b-e35e-4fd1-9b91-f3f8c76af0a2.png)![Screenshot 2025-04-03 195900.png](/.attachments/Screenshot%202025-04-03%20195900-d56ea203-f532-42a3-953b-eef27fd6feda.png)
**Desktop:**
![Screenshot 2025-04-03 195959.png](/.attachments/Screenshot%202025-04-03%20195959-b28ba71d-fcb4-4579-977a-095cb786bce2.png)![Screenshot 2025-04-03 200014.png](/.attachments/Screenshot%202025-04-03%20200014-51454ef5-f0ed-4c66-9cf9-60cbf5008902.png)
#**Static table**

| file | maintailbility | complexity | sloc | est errors | lint errors |
| --- | --- | --- | --- | --- | --- |
| server.js | 62.25 | 72 | 553 | 7.05 | 43 |
| task.js | 67.81 | 21 | 192 | 1.63 | 51 |
*   **complexity**: ตัวชี้วัดความซับซ้อนของโค้ด 
    
*   **lint errors**: จำนวนข้อผิดพลาดที่เกิดจากการตรวจสอบโค้ด 
    
*   **estimated errors**: จำนวนข้อผิดพลาดที่คาดว่าจะเกิดขึ้นในโค้ด
    
*   **SLOC (Lines of Code)**: จำนวนบรรทัดของโค้ดในแต่ละไฟล์

#**Dynamic table**

![Screenshot 2025-04-03 220124.png](/.attachments/Screenshot%202025-04-03%20220124-e0681025-eceb-4be0-8bac-5973d8b9543b.png)

- **register Timer:** เปิดหน้าจอให้กรอกข้อมูลสร้างตัวจับเวลาใหม่
- **register Timer:** เมื่อกรอกเสร็จ กดอีกทีเพื่อบันทึกตัวจับเวลา
- **Login:** เปิดหน้าจอให้กรอก Email/Password
- **Login:** เมื่อกรอกเสร็จ กดอีกทีเพื่อยืนยันและเข้าสู่ระบบ
- **updeteFavorites:** กดปุ่มหัวใจ ♥ เพื่อเพิ่ม-ลบ เมนูนั้นใน “รายการโปรด”
- **To-do list:** กดดูรายการงาน (เมนู) ที่ยังไม่ถูกทำเสร็จ
- **markAsDone:** กดปุ่มติ๊กถูก ✓ เพื่อเลื่อนงานจาก “ต้องทำ” ไปเป็น “ทำเสร็จแล้ว”
- **logoutTime:** กดเพื่อออกจากระบบ (Logout)
---

#**7.Website screenshot**


![Screenshot 2025-04-02 212623.png](/.attachments/Screenshot%202025-04-02%20212623-e4cd6c5a-002c-4a0a-b92f-5b37bb18b846.png)![Screenshot 2025-04-02 212638.png](/.attachments/Screenshot%202025-04-02%20212638-dbf8cb07-99e5-4f7c-96d1-8fafca92c4d9.png)
![Screenshot 2025-04-02 212652.png](/.attachments/Screenshot%202025-04-02%20212652-a7a97408-6b30-4911-b500-b331d64220e4.png)![Screenshot 2025-04-02 212708.png](/.attachments/Screenshot%202025-04-02%20212708-94c37f13-5a14-46e5-a09e-8f2a6d00c1c3.png)![Screenshot 2025-04-02 212728.png](/.attachments/Screenshot%202025-04-02%20212728-82082106-eeb2-41c7-b8f4-66f9998c53a0.png)![Screenshot 2025-04-02 212746.png](/.attachments/Screenshot%202025-04-02%20212746-7ab44f59-e547-4b3f-8529-0d0848bf3bee.png)![Screenshot 2025-04-02 212803.png](/.attachments/Screenshot%202025-04-02%20212803-a966ef61-d494-43df-a496-24d472e6f7c7.png)![Screenshot 2025-04-02 212823.png](/.attachments/Screenshot%202025-04-02%20212823-b3e57f2d-3037-4fae-8bfa-2ea8b1131ce9.png)![Screenshot 2025-04-02 212942.png](/.attachments/Screenshot%202025-04-02%20212942-9e7e5cc4-cdc3-48ca-985e-77de31a2edcb.png)![Screenshot 2025-04-02 212957.png](/.attachments/Screenshot%202025-04-02%20212957-1a190d69-69a5-4ab3-9a43-28f96d70ab01.png)![Screenshot 2025-04-02 213012.png](/.attachments/Screenshot%202025-04-02%20213012-544d0663-ad98-4fac-b647-066eeb93ed8c.png)

---

#**Video Retrospective Phase 3**
#**video:** **[วิดิโอ Retrospective Phase 3](https://www.youtube.com/watch?v=x16gUiIK2kg)**
สรุป:
* สมาชิกในทีมไม่สามารถทำงานตามที่สั่งไว้ จึงต้องมีการปรับแก้ไข และมีความรู้ในบางเรื่องไม่มากพอ
    
* มีปัญหาในการรันคำสั่ง `npm test`
    
* dynamic ปัญหาการรันบน Terminal ฟังชั่นก์ไม่แสดงเวลาในการทำงาน

